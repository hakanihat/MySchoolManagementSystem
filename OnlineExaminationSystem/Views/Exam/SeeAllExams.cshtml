@model List<OnlineExaminationSystem.Models.Exam>

<h1>Exams</h1>

<div class="filter-container">
    <label for="filterInput">Filter by Exam Name or Course:</label>
    <input type="text" id="filterInput">
</div>

<table class="table">
    <thead>
        <tr>
            <th>Name</th>
            <th>Course</th>
            <th>Duration</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var exam in Model)
        {
            <tr class="exam-row" data-exam-name="@exam.Name" data-course="@exam.Course.Name">
                <td>@exam.Name</td>
                <td>@exam.Course.Name</td>
                <td>@exam.ExamDuration</td>
                <td>
                    <a asp-action="Edit" asp-controller="Exam" asp-route-id="@exam.Id" class="btn btn-primary">Edit</a>
                    <form asp-action="Delete" asp-route-id="@exam.Id" method="post">
                        <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this exam?')">Delete</button>
                    </form>
                    <a asp-action="Create" asp-controller="Assignment" asp-route-examId="@exam.Id" class="btn btn-success">Create Assignment for Exam</a>
                </td>
            </tr>
        }
    </tbody>
</table>

@section scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            // Function to filter exams based on the provided filter
            function filterExams() {
                var filterValue = $('#filterInput').val().trim().toLowerCase();

                $('.exam-row').each(function () {
                    var examName = $(this).data('exam-name').toLowerCase();
                    var course = $(this).data('course').toLowerCase();

                    if (examName.includes(filterValue) || course.includes(filterValue)) {
                        $(this).show();
                    } else {
                        $(this).hide();
                    }
                });
            }

            // Event handler for the filter input
            $('#filterInput').on('input', function () {
                filterExams();
            });
        });
    </script>
}
