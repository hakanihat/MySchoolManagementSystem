@using OnlineExaminationSystem.ViewModels
@model ExamViewModel

<h2>Edit Exam</h2>

<form asp-action="Edit" method="post">
    <div class="form-group">
        <label asp-for="CourseId" class="control-label"></label>
        <select asp-for="CourseId" class="form-control" asp-items="@Model.Courses"></select>
        <span asp-validation-for="CourseId" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="Name" class="control-label"></label>
        <input asp-for="Name" class="form-control" />
        <span asp-validation-for="Name" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="Description" class="control-label"></label>
        <textarea asp-for="Description" class="form-control"></textarea>
        <span asp-validation-for="Description" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="StartTime" class="control-label"></label>
        <input asp-for="StartTime" class="form-control flatpickr" data-enable-time="true" data-date-format="Y-m-d H:i" />
        <span asp-validation-for="StartTime" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="EndTime" class="control-label"></label>
        <input asp-for="EndTime" class="form-control flatpickr" data-enable-time="true" data-date-format="Y-m-d H:i" />
        <span asp-validation-for="EndTime" class="text-danger"></span>
    </div>

    <div id="selectedQuestionsContainer">
        @foreach (var question in Model.Questions)
        {
            if (Model.SelectedQuestionIds.Contains(Int32.Parse(question.Value)))
            {
                <div id="question@(question.Value)" class="form-group">
                    <label for="Question@(question.Value)">@question.Text</label>
                    <input id="Question@(question.Value)" name="Question@(question.Value)" type="text" class="form-control" value="@question.Text" />
                    <button type="button" class="btn btn-danger btn-sm delete-question">Delete</button>
                </div>
            }
        }
        <input type="hidden" name="SelectedQuestionIdsJson" id="SelectedQuestionIdsJson" />
    </div>

    <div class="form-group">
        <label for="SelectedQuestionIds">Select a question</label>
        <select id="SelectedQuestionIds" name="SelectedQuestionIds" class="form-control">
            <option value="">-- Select a question --</option>
            @foreach (var question in Model.Questions)
            {
                <option value="@question.Value">@question.Text</option>
            }
        </select>
    </div>

    <button type="submit" class="btn btn-primary">Save</button>
</form>


        @section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" rel="stylesheet">
    <link rel="stylesheet" href="~/css/examQuestions.css" asp-append-version="true" />
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="~/js/basicflatPickt.js"></script>
    <script src="~/js/checkDates.js"></script>
    <script src="~/js/generateQuestionInEdit.js"></script>
    <script src="~/js/deleteInputInDelete.js"></script>
    <script src="~/js/proba.js"></script>

       
    }
